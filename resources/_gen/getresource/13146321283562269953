HTTP/2.0 200 OK
Content-Length: 17115
Accept-Ranges: bytes
Alt-Svc: h3=":443"; ma=2592000
Content-Type: text/html; charset=utf-8
Date: Sat, 13 Jan 2024 17:50:30 GMT
Etag: "s77eebd7f"
Last-Modified: Sat, 13 Jan 2024 14:18:11 GMT
Server: Caddy

<!doctype html>
<html>
  <head>
	<meta name="generator" content="Hugo 0.121.1">
    <title>Statement regarding the ongoing SourceHut outage</title>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description"
  content="sourcehut is a network of useful open source tools for software project maintainers and collaborators, including git repos, bug tracking, continuous integration, and mailing lists." />
<link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4QIGCC8n92KyhQAAAj1QTFRFAAAA////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////anIwUQAAAL50Uk5TAAECAwQFBgcICQoLDA4PEBESExQVFhcYGRobHB0eHyAhIyQmJygpKistLzAzNDU2Nzg5Ozw9QEFDREZHSElLTE1OT1BRVFdYWVpbXF1eX2BhZGZnaGltbnBxdHV3eHp7fn+AgYKDhIWGh4iJio2TlJucnqGio6Smp6ipqqusrbCxsrO0tre4ury9vr/Cw8TFxsfIycrMzc7P0dLT1dbY2dvf4OLj5OXm5+jq6+zt7u/w8fL09fb3+Pn6+/z9/gNzyOkAAAABYktHRL6k3IPDAAAFwUlEQVQYGe3B+VtUVQAG4G9i0TQZZyA1S0JxydzDNFTUqXBfcylzS8UE21TMyjAQUQnFEi0BHQU3cAc0UGbm+9v65Zw7y70zc++dc3qenof3xZAhQ4b8T+V/uGn/kdrm1psdHTdbm2uP7Ns434//yLD5e+u7aOH+6T0ludBszGf1L5jC87rNBdDm9XXnw0wrfG71cOhQ9N0z2vTk20Ko9t5PYToQOj4FKr17IkKHwtUToMobVQN0of/rkVDik7t06c5yZC7/V1rqajq6f9vKQFlZYNW2A0cvdNPSL35kaPEDmgxerFiSjwQFZQebQzTpKkUmsg4xUX/Nijwk4V15aoAJIhVZcM13ngnatuQhJe/WNiY464VLE28xXsMCD9LyLDzLeMEiuDLzIeM0zIRNs88xTvcMuFDSx1htC+FA6XXG6pkLx0qeM8aLHdlwJGfnP4zRNw8OzexjjOaJcGzSn4zR8z4cmfiQUZF9WXAhuyLCqO4iOOC7xahni+BSWQ+jgl7YlnWeUR3FcG1qJ6MasmDXIUZdexMZGNvGqAOwaTGjrnqREd/fNERKYUvBAxqueZEhXzsNXX7Y8SsNHW8iY+M6afgZNnxKw7NiKDCtl4YA0nrjHqXIIiixjIY7I5FOFQ37oEglDZVIo+glpeYsKJJ9mdJAIVI7QenFRChT3E+pGim9F6G0AwrtohSeglR+otSWDYVygpSqkUJRmNJCKLWEUmgCkvuOUgPU8vxO6TCSev0ZpZlQ7ANKj4YhmXWUGqBcI6UVSOY8pQVQbhGlM0hiTJhCmwfKeW5QCPlh7TNKW6DBdkobYa2eQn8eNPC9pPAbLA17QaEGWtRS6MuBlfmUVkCLtZTmwspeCoN50MIXprATVuopXIQmLRROwUoXhQpoUkXhNizkU1oCTZZRyoPZh5Tyock4SnNgtolCF3TxPKKwBmb7KTRBm0sUdsPsCIWj0OY4hR9gVkthP7SppHASZs0UtkGbLyg0wqyVwkpos4FCC8xuUghAm3IK7TDroFAGbQIUgjDroFAGbQIUgjC7SSEAbcoptMOslcIqaLOBQgvMmilsgzY7KDTCrJbCAWhTReEkzI5QOAptfqTwPcz2UbgAbS5R2AWzjRS6oYvnMYXVMJtPqQCavEVpNsz8lMqgyXJKo2DhPoWD0OQwhU5YOU2hGZpcoVADK3sohLzQwh+h8CWslFBaCS3WUZoDK7nPKZyCFnUUerNh6TSFAS808L+iUANrmylthQafU1oPawVhCm0eKOcJUhgcjSTOUVoI5RZTqkMyqymdhXJNlMqRzPAnlGZDsRJKD3OR1LeUzkEtTxOlSiRXGKL0EZRaSmlwPFI4Tul6DhTKvUXpGFKZEqa0EwrtoRQqRkrVlP6ZBGUmD1A6htQm9FP6IxuK5Fyl1P8O0viahgoo8g0NB5HOyDuUImVQ4mMabo9AWgEaeqZCgel9NCyFDb/Q0DkWGXv7Lg0nYIe/i4Y2HzKUf4OGe6NhS2mEhr98yEh+Kw3hBbCpglHt45CB8TcY9RXsyjrLqM5pcG36XUadfg22eYOM6l0Glz7uY9T1UXCg6AFjHMqGCznfMMb9Qjgyo4cxLhfDsclXGePpdDg0r48x+nflwJHcPQOM0TsLjs3rYazgEtjnWXqLsZ7Oggszuhnn9w9gU0kT49yfDleKgozXuMiDtDyLmxjveiFc8jYwwY3tPqTk/zzIBPWj4FpWRYQJXtau9SEJ/7q6V0wQ/uo1ZKK0iybhlqplYxHP89byw1ciNLm3ABny/0xLjy4dr/xiQ3kgUL5hR9WPlx7T0onRyFzgDl26vRRKjKwcoAv9B0dAlcLqMB0KH3sHKk2pDtGBwWPFUG3C4Ue06WHleOgwbMWZENMarCvPhTb+jb/1MYXemvWjoVnO3J2nbtNCZ82Xc7LxH8mbs2b3DycbW9qDwfaWxpPf71o9exSGDBky5P/pX9F6dsCMuJp+AAAAAElFTkSuQmCC" />

<link rel="stylesheet" href="/main.min.7ec3982e7b724a7c6bb1fb0a422464388ee5a57eb9aadeaba613417fa374a947.css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="/blog/index.xml">

  </head>
  <body>
    <div>
  <nav>
    <span class="brand">
      <span class="icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200z"/></svg>
      </span>
      <a href="/">
        sourcehut
      </a>
    </span>
  </nav>
</div>

    <main>
      <header>
        <div class="heading">
          <div class="info">
            <div class="content">
              January 12, 2024
              by Drew DeVault
            </div>
          </div>
          <div class="content">
            <h1>
              Statement regarding the ongoing SourceHut outage
            </h1>
          </div>
        </div>
      </header>
      <article class="content">
        <p>Current service availability, subject to DNS propagation delays:</p>
<ul>
<li>sr.ht: offline</li>
<li>meta.sr.ht: offline</li>
<li>git.sr.ht: offline</li>
<li>hg.sr.ht: offline</li>
<li>todo.sr.ht: offline</li>
<li>lists.sr.ht: offline</li>
<li>paste.sr.ht: offline</li>
<li>man.sr.ht: offline</li>
<li>pages.sr.ht: offline</li>
<li>builds.sr.ht: offline</li>
<li>chat.sr.ht: offline</li>
</ul>
<p>* Object storage remains unavailable for the time being, meaning that releases
attached to git and hg tags are currently unavailable.</p>
<p>* hg.sr.ht has known performance issues and problems with hg clone. As the
service is community maintained, work on restoring it is on hold until we can
get the community maintainers involved.</p>
<p><strong>Update 2024-01-13 14:17 UTC</strong>: We will need to find a new transit provider to
mitigate the problem. We are in talks with a provider to address the problem and
we will begin the engineering work shortly. Further updates to come as we have
them. Thank you again for your patience.</p>
<p><strong>Update 2024-01-13 13:00 UTC</strong>: Our new transit provider has notified us that
the DDoS has followed us to our new network. They have deployed mitigations and
we do not expect an interruption in service. <strong>Update</strong>: service is impacted, we
are investigating further.</p>
<p>Note that our new transit solution utilizes end-to-end encryption such that
traffic between you and SourceHut is received and processed directly by our
colocated servers and is not handled in plaintext by third-parties.</p>
<p><strong>Update 2024-01-13 12:40 UTC</strong>: Mail service to lists and todo has been
restored, subject to DNS propagation delays. Emails queued during the outage
should resume processing now &ndash; we do not believe any emails have been lost.</p>
<p><strong>Update 2024-01-13 11:42 UTC</strong>: We have brought pages.sr.ht into service for
read-only operations. All custom domains should be working soon, subject to DNS
propagation delays, with the exception of custom domains using apex records
(i.e. top level domains such as example.org rather than subdomain.example.org).
<strong>Manual intervention is required for affected users</strong>.</p>
<p>We have established a temporary IP address for serving custom domains using apex
records. Users can change their apex record to the following IP address to
restore <em>read-only</em> pages service:</p>
<pre><code>@   IN  A   141.95.4.185
</code></pre>
<p>Note that we may change this IP address in the future. You will be notified by
email if later changes are required for your domain.</p>
<p><strong>Update 2024-01-13 11:00 UTC</strong>: We have enabled read/write access to most
services. hg is still read-only, and todo and lists process requests from the
web but the mail system is still a work-in-progress.</p>
<p><strong>Update 2024-01-13 09:26 UTC</strong>: Good morning. We have brought hg.sr.ht up in
read-only mode and are working towards enabling read/write for available
services today. We have also finished importing the diff from backup for
git.sr.hg, and the diff for hg should finish soon.</p>
<p><strong>Update 2024-01-12 20:49 UTC</strong>: We are now putting the finishing touches on our
goals for today. We have 7 primary services up and running in read-only mode. An
earlier issue with git clone/fetch was also fixed; this should be working again.</p>
<p>We have planned a lighter workload for this weekend; we need the rest. Our goal
is to have hg.sr.ht online in read-only mode. We will try to get read/write
service partially restored for these 7 services, plus hg, this weekend.
chat.sr.ht, pages.sr.ht, and builds.sr.ht have special considerations for
resumption of service which we will be planning for early next week.</p>
<p>Thank you for your patience, and have a good night.</p>
<p><strong>Update 2024-01-12 16:38 UTC</strong>: todo and lists are coming online in read-only
mode.</p>
<p><strong>Update 2024-01-12 16:13 UTC</strong>: We are beginning to bring some services online.
meta and git will become available as DNS propegates to your local nameserver.</p>
<hr>
<p>My name is Drew, I&rsquo;m the founder of SourceHut and one of three SourceHut staff
members working on the outage, alongside my colleagues Simon and Conrad. As you
have noticed, SourceHut is down. I offer my deepest apologies for this
situation. We have made a name for ourselves for reliability, and this is the
most severe and prolonged outage we have ever faced. We spend a lot of time
planning to make sure this does not happen, and we failed. We have all hands on
deck working the problem to restore service as soon as possible.</p>
<p>In our emergency planning models, we have procedures in place for many kinds of
eventualities. What has happened this week is essentially our worst-case
scenario: &ldquo;what if the primary datacenter just disappeared tomorrow?&rdquo; We ask
this question of ourselves seriously, and make serious plans for what we&rsquo;d do if
this were to pass, and we are executing those plans now &ndash; though we had hoped
that we would never have to.</p>
<p>I humbly ask for your patience and support as we deal with a very difficult
situation, and, again, I offer my deepest apologies that this situation has come
to pass.</p>
<h2 id="what-is-happening">What is happening?</h2>
<p>At 06:30 UTC on January 10th, two days prior to the time of writing, a
distributed denial of service attack (DDoS) began targetting SourceHut. We still
do not know many details &ndash; we don&rsquo;t know who they are or why they are
targetting us, but we do know that they are targetting SourceHut specifically.</p>
<p>We deal with ordinary DDoS attacks in the normal course of operations, and we
are generally able to mitigate them on our end. However, this is not an ordinary
DDoS attack; the attacker posesses considerable resources and is operating at a
scale beyond that which we have the means to mitigate ourselves. In response,
before we could do much ourselves to understand or mitigate the problem, our
upstream network provider null routed SourceHut entirely, rendering both the
internet at large, and SourceHut staff, unable to reach our servers.</p>
<p>The primary datacenter, PHL, was affected by this problem. We rent colocation
space from our PHL supplier, where we have our own servers installed. We
purchase networking through our provider, who allocates us a block out of their
AS, and who upstreams with Cogent, which is the upstream that ultimately black
holed us. Unfortunately, our colocation provider went through two acquisitions
in the past year, and we failed to notice that our account had been forgotten as
they migrated between ticketing systems through one of these acquisitions. Thus
unable to page them, we were initially forced to wait until their normal office
hours began to contact them, 7 hours after the start of the incident.</p>
<p>When we did get them on the phone, our access to support ticketing was restored,
they apologised profusely for the mistake, and we were able to work with them on
restoring service and addressing the problems we were facing. This led to
SourceHut&rsquo;s availability being partially restored on the evening of January
10th, until the DDoS escalated in the early hours of January 11th, after which
point our provider was forced to null route us again.</p>
<p>We have seen some collateral damage as well. You may have noticed that Hacker
News was down on January 10th; we believe that was ultimately due to Cogent&rsquo;s
heavy handed approach to mitigating the DDoS targetting SourceHut (sorry, HN,
glad you got it sorted). Last night, a non-profit free software forge, Codeberg,
also became subject to a DDoS, which is still ongoing and may be caused by the
same actors. This caused our status page to go offline &ndash; Codeberg has been kind
enough to host it for us so that it&rsquo;s reachable during an outage &ndash; we&rsquo;re not
sure if Codeberg was targetted because they hosted our status page or if this is
part of a broader attack on free software forge platforms.</p>
<h2 id="what-are-we-doing-about-it">What are we doing about it?</h2>
<p>We maintain three sites, PHL, FRE, and AMS. PHL is our primary and is offline,
FRE is our backup site, and AMS is a research installation we eventually hoped
to use to migrate our platform to European hosting. As we initially had no
access whatsoever to PHL, we began restoring from backups to AMS to set up a
parallel installation of SourceHut from scratch.</p>
<p>We have since received some assistance from our PHL provider in regaining access
to our PHL servers out of band, which is speeding up affairs, but we do not
expect to get PHL online soon and we are proceeding with the AMS installation
for now.</p>
<p>The prognosis on user data loss is good. Our backups are working and regularly
tested, the last full backup of git and hg was taken a few hours before the DDoS
began, and we have out-of-band access to the live PHL servers where all changes
which occured since the most recent backup are safely preserved. The database is
replicated in real-time and was only seconds behind production before it went
offline.</p>
<p>We have replicated the production database in AMS and started spinning up
SourceHut services there: we have meta, todo, lists, paste, and the project hub
fully operational against production data in our staging environment here. We
are still working on the following services in order of priority:</p>
<ol>
<li>git.sr.ht</li>
<li>hg.sr.ht</li>
<li>pages.sr.ht</li>
<li>chat.sr.ht</li>
<li>man.sr.ht</li>
<li>builds.sr.ht</li>
</ol>
<p>These services, particularly git and hg, require large transfers of data across
our networks to restore from backups, and will take some time. Chat does not
require particularly large amounts of data to be managed, but has special
networking concerns that we are addressing as well.</p>
<p>Our goal is to enable read-only access for the community as quickly as possible,
then work on full read/write access following that. Object storage (used for
git/hg releases, build artifacts, and SourceHut pages) presents a special set of
problems; we are working on those separately. Finding suitable compute to run
build jobs is another issue which requires special attention, but we have a plan
for this as well.</p>
<p>One of our main concerns right now is finding a way of getting back online on a
new network without the DDoS immediately following us there, and we have reason
to believe that it will. A layer 3 DDoS like the one we are facing is complex
and expensive to mitigate. We spoke to CloudFlare and were quoted a number we
cannot reasonably achieve within our financial means, but we are investigating
other solutions which may be more affordable and have a few avenues for research
today, though we cannot disclose too many details without risking alerting the
attackers to our plans.</p>
<h2 id="how-you-can-help">How you can help</h2>
<p>What we need the most right now is your patience and understanding. Mitigating
this sort of attack is a marathon, not a sprint, and we have to be careful not
to overwork our staff, ensure we&rsquo;re getting enough sleep, and so on &ndash; we are
working as hard as we can. There are many people hard at work on this problem
for you &ndash; I&rsquo;d like to thank Simon and Conrad in particular for their work, as
well as the datacenter and network operators upstream of us who are doing their
best as well.</p>
<p>You can receive updates on this page, so long as we&rsquo;re able to keep it online
(low priority), as well as <a href="https://fosstodon.org/@drewdevault">on Mastodon</a>, where we are posting updates as
well. This is also a good place to share your words of support and
encouragement, as well as the #sr.ht IRC channel on Libera Chat. My inbox at
<a href="mailto:sir@cmpwn.com">sir@cmpwn.com</a> is also working (not without some effort,
I&rsquo;ll add), if you wish to send your support or offer any resources that might
help.</p>
<p>Thank you for your patience and support. We are working to make things right
with you.</p>

      </article>
      <div class="next-prev">
        <div class="prev">
          
        </div>
        <div class="next">
          
        </div>
      </div>
    </main>
    <div style="margin-top: 2rem"></div>
  </body>
</html>
